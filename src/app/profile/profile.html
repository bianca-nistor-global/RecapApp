<div class="profile-container">

  <div class="form-mode-buttons" *ngIf="!editing && !hasProfile">
    <p>Choose how you want to create your profile:</p>
    <button mat-raised-button color="primary" (click)="setFormMode('template')">
      <mat-icon>format_align_left</mat-icon> Template Form
    </button>
    <button mat-raised-button color="accent" (click)="setFormMode('reactive')">
      <mat-icon>code</mat-icon> Reactive Form
    </button>
  </div>

  <!-- 🧾 Existing Profile Display -->
  <div class="profile-card" *ngIf="!editing && hasProfile">
    <h2>{{ profile.username }}</h2>
    <img
      *ngIf="profile.imageUrl"
      [src]="profile.imageUrl"
      alt="Profile Image"
      width="150"
    />
    <p>Name: {{ profile.firstName }} {{ profile.lastName }}</p>
    <p>Email: {{ profile.email }}</p>
    <p *ngIf="profile.phone">Phone: {{ profile.phone }}</p>
    <button mat-raised-button (click)="startEditing()">
      <mat-icon>edit</mat-icon>
      Edit Profile
    </button>
  </div>

  <!-- ❌ No Profile Fallback -->
  <ng-template #noProfile>
    <p>No profile created yet.</p>
    <button mat-raised-button (click)="startEditing()">Create Profile</button>
  </ng-template>

  <div *ngIf="editing && formMode === 'template'">
    <app-template-profile
      [profile]="profile"
      (cancel)="cancelEditing()"
      (save)="onProfileSaved($event)"
    ></app-template-profile>
  </div>

  <div *ngIf="editing && formMode === 'reactive'">
    <app-reactive-profile
      [profile]="profile"
      (cancel)="cancelEditing()"
      (save)="onProfileSaved($event)"
    >
    </app-reactive-profile>
  </div>
</div>
